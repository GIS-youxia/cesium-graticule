function e(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(i){if("default"!==i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,t}var t=/*#__PURE__*/e(require("cesium")),i=0;function r(e){return"__private_"+i+++"_"+e}function a(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var n=[.00675,.0125,.025,.05,.1,.2,.5,1,2,5,10].map(t.Math.toRadians);function o(e){return e<.01?3:e<.1?2:e<1?1:0}function s(e,t){var i=Math.abs(e),r=~~i,a=Math.round(600*(i-r))/10,n=~~a,o=(60*(a-n)).toFixed(2),s="";return(n||"0.00"!==o)&&(s+=n+"'"),"0.00"!==o&&(s+=o+'"'),r+"°"+s.padStart(2,"0")+(t?e>=0?"N":"S":e>=0?"E":"W")}var h=/*#__PURE__*/r("color"),l=/*#__PURE__*/r("viewer"),c=/*#__PURE__*/r("scene"),d=/*#__PURE__*/r("labels"),u=/*#__PURE__*/r("polylines"),v=/*#__PURE__*/r("ellipsoid"),p=/*#__PURE__*/r("currentExtent"),f=/*#__PURE__*/r("visible"),b=/*#__PURE__*/r("lastRefresh"),g=/*#__PURE__*/r("debounce"),w=/*#__PURE__*/r("gridCount"),y=/*#__PURE__*/r("granularity"),C=/*#__PURE__*/r("getExtentView"),O=/*#__PURE__*/r("screenCenterPosition"),m=/*#__PURE__*/r("makeLabel"),M=/*#__PURE__*/r("updateLabelPositions"),P=/*#__PURE__*/r("drawGrid"),E=/*#__PURE__*/r("render");function j(){for(var e=a(this,c)[c].camera,i=a(this,c)[c].canvas,r=[e.pickEllipsoid(new t.Cartesian2(0,0),a(this,v)[v]),e.pickEllipsoid(new t.Cartesian2(i.width,0),a(this,v)[v]),e.pickEllipsoid(new t.Cartesian2(0,i.height),a(this,v)[v]),e.pickEllipsoid(new t.Cartesian2(i.width,i.height),a(this,v)[v])],n=0;n<4;n++)if(void 0===r[n])return t.Rectangle.MAX_VALUE;return t.Rectangle.fromCartographicArray(a(this,v)[v].cartesianArrayToCartographicArray(r))}function A(){var e=a(this,c)[c].canvas,i=new t.Cartesian2(Math.round(e.clientWidth/2),Math.round(e.clientHeight/2)),r=a(this,c)[c].camera.pickEllipsoid(i);return r||(r=t.Cartesian3.fromDegrees(0,0,0)),r}function L(e,i,r,n,o,s){void 0===o&&(o="white"),void 0===s&&(s=!1),s&&("0°N"===r&&(r="Equator"),"0°E"===r&&(r="Prime Meridian"),"180°E"===r&&(r="Antimeridian"));var h=t.Cartographic.fromCartesian(a(this,O)[O]()),l=new t.Cartographic(e,i);n?l.longitude=h.longitude:l.latitude=h.latitude;var c=a(this,v)[v].cartographicToCartesian(l);a(this,d)[d].add({position:c,text:r,font:"bold 1rem Arial",fillColor:o,outlineColor:t.Color.BLACK,outlineWidth:4,style:t.LabelStyle.FILL_AND_OUTLINE,pixelOffset:new t.Cartesian2(n?0:4,n?-6:0),eyeOffset:t.Cartesian3.ZERO,horizontalOrigin:t.HorizontalOrigin.CENTER,verticalOrigin:n?t.VerticalOrigin.BOTTOM:t.VerticalOrigin.TOP,scale:1,scaleByDistance:new t.NearFarScalar(1,.85,8e6,.75)}).isLat=n}function T(){for(var e=t.Cartographic.fromCartesian(a(this,O)[O]()),i=a(this,d)[d].length,r=0;r<i;++r){var n=a(this,d)[d].get(r),o=t.Cartographic.fromCartesian(n.position);n.isLat?o.longitude=e.longitude:o.latitude=e.latitude,n.position=a(this,v)[v].cartographicToCartesian(o)}}function R(e){e||(e=a(this,C)[C]());var i=t.Rectangle.MAX_VALUE,r=void 0;(e=Object.assign({},e)).east<e.west&&(r=i.east+Math.abs(-i.east-e.east)),a(this,u)[u].removeAll(),a(this,d)[d].removeAll();var l,c=n[0],p=n[0];for(l=0;l<n.length&&c<(e.north-e.south)/a(this,w)[w];l++)c=n[l];for(l=0;l<n.length&&p<((void 0===r?e.east:r)-e.west)/a(this,w)[w];l++)p=n[l];var f=t.Cartographic.fromCartesian(a(this,O)[O]());f.latitude>t.Math.toRadians(75)||f.latitude<t.Math.toRadians(-75)||p!==c&&(p=c=Math.min(c,p));var b,g,M=(e.west<0?Math.ceil(e.west/p):~~(e.west/p))*p,P=(e.south<0?Math.ceil(e.south/c):~~(e.south/c))*c,E=(e.east<0?Math.ceil(e.east/c):~~(e.east/c))*c,j=(e.north<0?Math.ceil(e.north/p):~~(e.north/p))*p;M=Math.max(M-2*p,-Math.PI),E=Math.min(E+2*p,Math.PI);for(var A=function(e,i){return{positions:e,width:.5,material:t.Material.fromType("Color",{color:i})}},L=(P=Math.max(P-2*c,-Math.PI/2))+~~(((j=Math.min(j+2*p,Math.PI/2))-P)/c/2)*c,T=void 0===r?E:r,R=0,_=M;_<T-p;_+=p){g=E>i.east?e._east-(_-i.east):_;var x=[];for(b=P;b<j;b+=a(this,y)[y])x.push(new t.Cartographic(g,b));x.push(new t.Cartographic(g,j));var k=s(+t.Math.toDegrees(g).toFixed(o(p)),!1),I="0°E"===k||"180°E"===k?t.Color.YELLOW:a(this,h)[h];"180°W"!==k&&(a(this,u)[u].add(A(a(this,v)[v].cartographicArrayToCartesianArray(x),I)),R%2&&a(this,m)[m](g,L,k,!1),R++)}var W=M+~~((T-M)/p/2)*p,D=0;for(b=P;b<j;b+=c){var N=[];for(g=M;g<T;g+=a(this,y)[y])N.push(new t.Cartographic(g,b));N.push(new t.Cartographic(E,b));var F=s(+t.Math.toDegrees(b).toFixed(o(c)),!0),V="0°N"===F?t.Color.YELLOW:t.Color.WHITE.withAlpha(.5);a(this,u)[u].add(A(a(this,v)[v].cartographicArrayToCartesianArray(N),V)),D%2&&a(this,m)[m](W,b,F,!0),D++}}module.exports=/*#__PURE__*/function(){function e(e,i){var r=this;void 0===i&&(i={}),Object.defineProperty(this,P,{value:R}),Object.defineProperty(this,M,{value:T}),Object.defineProperty(this,m,{value:L}),Object.defineProperty(this,O,{value:A}),Object.defineProperty(this,C,{value:j}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:500}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:t.Math.toRadians(3)}),Object.defineProperty(this,E,{writable:!0,value:function(){var e=a(r,b)[b];if(!((new Date).getTime()-e<a(r,g)[g])){a(r,M)[M]();var t=a(r,C)[C](),i=!0;if(a(r,p)[p]){var n=Math.abs(t.west-a(r,p)[p].west),o=Math.abs(t.south-a(r,p)[p].south),s=Math.abs(t.east-a(r,p)[p].east),h=Math.abs(t.north-a(r,p)[p].north),l=1e-4;n<l&&o<l&&s<l&&h<l&&(i=!1)}!i&&a(r,d)[d].length||(a(r,p)[p]=t,a(r,P)[P](t))}}}),a(this,l)[l]=e,a(this,c)[c]=e.scene,a(this,h)[h]=i.color||t.Color.WHITE.withAlpha(.5),a(this,w)[w]=i.gridCount||15,a(this,d)[d]=new t.LabelCollection,e.scene.primitives.add(a(this,d)[d]),a(this,u)[u]=new t.PolylineCollection,e.scene.primitives.add(a(this,u)[u]),a(this,v)[v]=e.scene.globe.ellipsoid,a(this,b)[b]=0,this.start(),a(this,f)[f]=!0}var i,r,n=e.prototype;return n.start=function(){a(this,l)[l].camera.percentageChanged=.03,a(this,l)[l].scene.camera.changed.addEventListener(a(this,E)[E]),a(this,l)[l].container.addEventListener("resize",a(this,E)[E]),a(this,E)[E](),a(this,f)[f]=!0,a(this,c)[c].requestRender()},n.remove=function(){a(this,u)[u].removeAll(),a(this,d)[d].removeAll(),a(this,l)[l].scene.camera.changed.removeEventListener(a(this,E)[E]),a(this,l)[l].container.removeEventListener("resize",a(this,E)[E]),a(this,f)[f]=!1,a(this,c)[c].requestRender()},i=e,(r=[{key:"visible",get:function(){return a(this,f)[f]}}])&&function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),e}();
//# sourceMappingURL=index.cjs.map
